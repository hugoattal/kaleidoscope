import{d as L,t as G,O as R,v as g,o as U,x as D,e as m,f as M,m as a,i as A,p as O,l as Y,h,A as I,B as Z,z as V,C,g as v,k as J,I as X}from"./index-IYjx4zwS.js";import{_ as P}from"./_plugin-vue_export-helper-CW8dRx5a.js";import{c as H,a as W,K as B}from"./KPercentageDisplay-LqrMdM6q.js";function F(e,i={}){let s=!0;i.fps??(i.fps=60);function _(){s=!1}let o=0,u=0;async function t(d){o||(o=d);const p=d-o;o=d,s&&(u+=p,u>1e3/i.fps&&(await e(u),u=0),requestAnimationFrame(t))}return requestAnimationFrame(t),_}const j=["height","width"],$=1/2e4,z=1e3,q=5,Q=L({__name:"KBackground",props:{speed:{default:1}},setup(e){const i=e,s=G(),_=G(),o=R(_);let u;const t=g(()=>Math.min(z,Math.floor(o.width.value*o.height.value*$)));U(()=>{u=F(d)}),D(()=>{u()});function d(r){x(),E(r),w()}const p=[];function b(){return-Math.log(1-Math.random()*.99)*20+20}function k(){return-Math.log(1-Math.random()*.99)*.1+.1}function x(){for(;p.length<t.value;)p.push({opacity:k(),radius:b(),x:Math.random(),y:Math.random()*2-.5});for(;p.length>t.value;)p.pop()}function E(r){const f=q*i.speed*r*.06/o.height.value;for(const n of p)n.y-=f/n.radius,n.y<-.5&&(n.y=1.5,n.x=Math.random(),n.radius=b(),n.opacity=k())}function w(){var N;const r=(N=s.value)==null?void 0:N.getContext("2d");if(!r)return;const f=s.value.width,n=s.value.height;r.clearRect(0,0,f,n);for(const l of p){const y=r.createRadialGradient(l.x*f,l.y*n,0,l.x*f,l.y*n,l.radius);y.addColorStop(0,`rgba(242, 146, 0, ${l.opacity*.6})`),y.addColorStop(.8,`rgba(242, 146, 0, ${l.opacity*.8})`),y.addColorStop(.9,`rgba(242, 146, 0, ${l.opacity})`),y.addColorStop(1,"rgba(242, 146, 0, 0)"),r.fillStyle="#f2920044",r.fillStyle=y,r.beginPath(),r.arc(l.x*f,l.y*n,l.radius,0,Math.PI*2),r.fill()}}return(r,f)=>(m(),M("div",{ref_key:"wrapper",ref:_,class:"canvas-wrapper"},[a("canvas",{ref_key:"canvas",ref:s,height:A(o).height.value,width:A(o).width.value},null,8,j)],512))}}),ee=P(Q,[["__scopeId","data-v-816a8f17"]]),te=""+new URL("rockit-D1Fp-gcz.svg",import.meta.url).href,S=G([]),c=G(),T=G([]);async function ae(){if(Object.values(H.playlists).length){const s=Object.values(H.playlists)[0];c.value=s[Math.floor(Math.random()*s.length)],T.value=Array.from({length:6},()=>s[Math.floor(Math.random()*s.length)]),S.value=Array.from({length:6},()=>s[Math.floor(Math.random()*s.length)]);return}const e={item:{id:"2sX7lJXsOYGP1Us6CqM9t1",name:"Little Bit of Love",type:"track",album:{id:"0NZUGfUMwjt3bPlVHxnIN2",name:"Little Bit of Love",type:"album",album_type:"single",artists:[{id:"5SHxzwjek1Pipl1Yk11UHv",name:"Tom Grennan",type:"artist",external_urls:{spotify:"https://open.spotify.com/artist/5SHxzwjek1Pipl1Yk11UHv"},href:"https://api.spotify.com/v1/artists/5SHxzwjek1Pipl1Yk11UHv",uri:"spotify:artist:5SHxzwjek1Pipl1Yk11UHv"}],available_markets:["AR","AU","AT","BE","BO","BR","BG","CA","CL","CO","CR","CY","CZ","DK","DO","DE","EC","EE","SV","FI","FR","GR","GT","HN","HK","HU","IS","IE","IT","LV","LT","LU","MY","MT","MX","NL","NZ","NI","NO","PA","PY","PE","PH","PL","PT","SG","SK","ES","SE","CH","TW","TR","UY","US","GB","AD","LI","MC","ID","JP","TH","VN","RO","IL","ZA","SA","AE","BH","QA","OM","KW","EG","MA","DZ","TN","LB","JO","PS","IN","BY","KZ","MD","UA","AL","BA","HR","ME","MK","RS","SI","KR","BD","PK","LK","GH","KE","NG","TZ","UG","AG","AM","BS","BB","BZ","BT","BW","BF","CV","CW","DM","FJ","GM","GE","GD","GW","GY","HT","JM","KI","LS","LR","MW","MV","ML","MH","FM","NA","NR","NE","PW","PG","PR","WS","SM","ST","SN","SC","SL","SB","KN","LC","VC","SR","TL","TO","TT","TV","VU","AZ","BN","BI","KH","CM","TD","KM","GQ","SZ","GA","GN","KG","LA","MO","MR","MN","NP","RW","TG","UZ","ZW","BJ","MG","MU","MZ","AO","CI","DJ","ZM","CD","CG","IQ","LY","TJ","VE","ET","XK"],external_urls:{spotify:"https://open.spotify.com/album/0NZUGfUMwjt3bPlVHxnIN2"},href:"https://api.spotify.com/v1/albums/0NZUGfUMwjt3bPlVHxnIN2",images:[{height:640,width:640,url:"https://i.scdn.co/image/ab67616d0000b273e415994ab2bc4df390ef1053"},{height:300,width:300,url:"https://i.scdn.co/image/ab67616d00001e02e415994ab2bc4df390ef1053"},{height:64,width:64,url:"https://i.scdn.co/image/ab67616d00004851e415994ab2bc4df390ef1053"}],release_date:"2021-01-08",release_date_precision:"day",total_tracks:5,uri:"spotify:album:0NZUGfUMwjt3bPlVHxnIN2"},artists:[{id:"5SHxzwjek1Pipl1Yk11UHv",name:"Tom Grennan",type:"artist",external_urls:{spotify:"https://open.spotify.com/artist/5SHxzwjek1Pipl1Yk11UHv"},href:"https://api.spotify.com/v1/artists/5SHxzwjek1Pipl1Yk11UHv",uri:"spotify:artist:5SHxzwjek1Pipl1Yk11UHv"}],available_markets:["AR","AU","AT","BE","BO","BR","BG","CA","CL","CO","CR","CY","CZ","DK","DO","DE","EC","EE","SV","FI","FR","GR","GT","HN","HK","HU","IS","IE","IT","LV","LT","LU","MY","MT","MX","NL","NZ","NI","NO","PA","PY","PE","PH","PL","PT","SG","SK","ES","SE","CH","TW","TR","UY","US","GB","AD","LI","MC","ID","JP","TH","VN","RO","IL","ZA","SA","AE","BH","QA","OM","KW","EG","MA","DZ","TN","LB","JO","PS","IN","BY","KZ","MD","UA","AL","BA","HR","ME","MK","RS","SI","KR","BD","PK","LK","GH","KE","NG","TZ","UG","AG","AM","BS","BB","BZ","BT","BW","BF","CV","CW","DM","FJ","GM","GE","GD","GW","GY","HT","JM","KI","LS","LR","MW","MV","ML","MH","FM","NA","NR","NE","PW","PG","PR","WS","SM","ST","SN","SC","SL","SB","KN","LC","VC","SR","TL","TO","TT","TV","VU","AZ","BN","BI","KH","CM","TD","KM","GQ","SZ","GA","GN","KG","LA","MO","MR","MN","NP","RW","TG","UZ","ZW","BJ","MG","MU","MZ","AO","CI","DJ","ZM","CD","CG","IQ","LY","TJ","VE","ET","XK"],disc_number:1,duration_ms:226268,explicit:!1,external_ids:{isrc:"GBARL2001197"},external_urls:{spotify:"https://open.spotify.com/track/2sX7lJXsOYGP1Us6CqM9t1"},features:{id:"2sX7lJXsOYGP1Us6CqM9t1",type:"audio_features",acousticness:.0833,analysis_url:"https://api.spotify.com/v1/audio-analysis/2sX7lJXsOYGP1Us6CqM9t1",danceability:.689,duration_ms:226268,energy:.706,instrumentalness:0,key:1,liveness:.105,loudness:-4.48,mode:0,speechiness:.0312,tempo:106.52,time_signature:4,track_href:"https://api.spotify.com/v1/tracks/2sX7lJXsOYGP1Us6CqM9t1",uri:"spotify:track:2sX7lJXsOYGP1Us6CqM9t1",valence:.623},href:"https://api.spotify.com/v1/tracks/2sX7lJXsOYGP1Us6CqM9t1",is_local:!1,popularity:59,preview_url:"https://p.scdn.co/mp3-preview/d254f2af818bab3843a1de549ba19ac75dae62d3?cid=b28f8580eecf4b3aa9bd0c1a59fde6c8",track_number:1,uri:"spotify:track:2sX7lJXsOYGP1Us6CqM9t1"}},i={currently_playing:e.item,queue:[e.item,e.item,e.item,e.item,e.item,e.item,e.item]};(!c.value||c.value.id!==i.currently_playing.id)&&(c.value&&S.value.push(c.value),c.value=i.currently_playing,T.value=i.queue,await W([c.value,...T.value])),S.value.push(c.value),S.value.push(c.value)}const se={},K=e=>(O("data-v-6a925387"),e=e(),Y(),e),oe={class:"playbar"},ie=K(()=>a("div",{class:"cursor"},null,-1)),re=K(()=>a("div",{class:"remaining"},[a("span",null,"1:08"),h(" restant ")],-1)),ne=[ie,re];function le(e,i){return m(),M("div",oe,ne)}const ce=P(se,[["render",le],["__scopeId","data-v-6a925387"]]),ue={class:"tracklist"},de={class:"cover"},pe=["src"],fe={class:"content"},he={class:"title"},me={class:"name"},_e={class:"artist"},ve={class:"features"},Me={class:"feature-wrapper"},ye={class:"feature-wrapper"},Se={class:"feature-wrapper"},Ge={class:"feature-wrapper"},Be={class:"description"},ge=L({__name:"KTracklist",setup(e){const i=g(()=>S.value.at(-1)),s=g(()=>T.value.slice(0,3)),_=g(()=>{const o=[];i.value&&o.push({type:"last",data:i.value,description:"Dernière"}),c.value&&o.push({type:"current",data:c.value,description:"En cours"});for(const[u,t]of s.value.entries())o.push({type:"next",data:t,description:`Prochaine ${u+1}`});return o});return(o,u)=>(m(),M("div",ue,[(m(!0),M(I,null,Z(_.value,t=>{var d;return m(),M("div",{key:t.data.id,class:V(["track",t.type])},[a("div",de,[a("img",{alt:"Album cover",src:(d=t.data.album.images[0])==null?void 0:d.url},null,8,pe)]),a("div",fe,[a("div",he,[a("span",me,C(t.data.name),1),h(" ("),a("span",_e,C(t.data.artists[0].name),1),h(") ")]),a("div",ve,[a("div",Me,[h(" Popularité "),v(B,{class:"feature","color-max":"#fcfa01","color-min":"#880004",value:t.data.popularity/100},null,8,["value"])]),a("div",ye,[h(" Tempo "),v(B,{class:"feature","color-max":"#fcfa01","color-min":"#880004",max:160,min:80,value:t.data.features.tempo},null,8,["value"])]),a("div",Se,[h(" Danceabilité "),v(B,{class:"feature","color-max":"#fcfa01","color-min":"#880004",value:t.data.features.danceability},null,8,["value"])]),a("div",Ge,[h(" Énergie "),v(B,{class:"feature","color-max":"#fcfa01","color-min":"#880004",value:t.data.features.energy},null,8,["value"])])]),t.type==="current"?(m(),J(ce,{key:0})):X("",!0)]),a("div",Be,C(t.description),1)],2)}),128))]))}}),Te=P(ge,[["__scopeId","data-v-54805880"]]),Pe={class:"content"},Ce=["src"],Ae=L({__name:"KPlayerLayout",setup(e){return U(async()=>{await ae()}),(i,s)=>(m(),M(I,null,[v(ee,{class:"bokeh"}),a("div",Pe,[a("img",{alt:"RockIt Logo",class:"logo",src:A(te)},null,8,Ce),v(Te)])],64))}}),Ne=P(Ae,[["__scopeId","data-v-db28b671"]]);export{Ne as default};
